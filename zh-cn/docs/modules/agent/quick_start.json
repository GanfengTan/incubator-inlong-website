{
  "filename": "quick_start.md",
  "__html": "<p>##一、安装</p>\n<pre><code>mvn clean package -DskipTests\n\n在项目下的target里面可以找到tgz安装包\n</code></pre>\n<h2>二、配置</h2>\n<p>###2.1 Agent 相关设置</p>\n<p>agent 支持两种运行模式：本地运行以及线上运行</p>\n<p>线上运行需要从inlong-manager拉取配置，配置conf/agent.properties如下：\nagent.fetcher.classname=org.apache.inlong.agent.plugin.fetcher.ManagerFetcher (设置任务获取的类名，默认为ManagerFetcher）\nagent.local.ip=写入本机ip\nagent.manager.vip.http.host=manager host\nagent.manager.vip.http.port=manager port</p>\n<p>###2.2 Proxy 相关设置\n在agent目录下新建.inlong.managerIps文件夹，内部新建bid+.local文件，例如设置的发送bid为a, 则新建a.local文件</p>\n<p>内部写入：</p>\n<pre><code>{&quot;cluster_id&quot;:45,&quot;isInterVisit&quot;:1,&quot;size&quot;:1,&quot;address&quot;: [{&quot;port&quot;:写入proxy port,&quot;host&quot;:&quot;写入proxy ip&quot;}], &quot;switch&quot;:0}\n</code></pre>\n<p>###2.3 本地 job配置\n如果不使用线上模式，可以使用本地文件新建读取任务\n在conf中新建目录jobs，\nvim job1.json：</p>\n<p>写入</p>\n<pre><code>{\n\n&quot;job&quot;: {\n\n&quot;dir&quot;: {\n\n&quot;pattern&quot;: &quot;需要读取的文件路径，可包含正则表达式&quot;\n\n},\n\n&quot;trigger&quot;: &quot;org.apache.inlong.agent.plugin.trigger.DirectoryTrigger&quot;,\n\n&quot;id&quot;: 1,\n\n&quot;name&quot;: &quot;fileAgentTest&quot;,\n\n&quot;source&quot;: &quot;org.apache.inlong.agent.plugin.sources.TextFileSource&quot;,\n\n&quot;sink&quot;: &quot;org.apache.inlong.agent.plugin.sinks.ProxySink&quot;,\n\n&quot;channel&quot;: &quot;org.apache.inlong.agent.plugin.channel.MemoryChannel&quot;\n\n},\n\n&quot;proxy&quot;: {\n\n&quot;bid&quot;: &quot;testbid1&quot;\n\n}\n\n}\n</code></pre>\n<p>其中各个参数含义为：</p>\n<pre><code>job.dir.pattern: 配置读取的文件路径，可包含正则表达式\n\njob.trigger: 触发器名称，默认为DirectoryTrigger，功能为监听文件夹下的文件产生事件\n\njob.source: 使用的数据源类型，默认为TextFileSource，读取文本文件\n\njob.sink：使用的写入器类型，默认为ProxySink，发送消息到proxy中\n\nproxy.bid: 写入proxy时使用的bid类型\n</code></pre>\n<p>###2.4 实时添加job配置</p>\n<p>##agent.propertities 修改下面两处</p>\n<pre><code># whether enable http service\nagent.http.enable=true\n# http default port\nagent.http.port=可用端口\n\ncurl --location --request POST 'http://localhost:8129/config/job' \\\n--header 'Content-Type: application/json' \\\n--data '{\n&quot;job&quot;: {\n&quot;dir&quot;: {\n&quot;path&quot;: &quot;&quot;,\n&quot;pattern&quot;: &quot;/data/inlong-agent/test.log&quot;\n},\n&quot;trigger&quot;: &quot;org.apache.inlong.agent.plugin.trigger.DirectoryTrigger&quot;,\n&quot;id&quot;: 1,\n&quot;thread&quot;: {\n&quot;running&quot;: {\n&quot;core&quot;: &quot;4&quot;\n},\n&quot;onejob&quot;: true\n},\n&quot;name&quot;: &quot;fileAgentTest&quot;,\n&quot;source&quot;: &quot;org.apache.inlong.agent.plugin.sources.TextFileSource&quot;,\n&quot;sink&quot;: &quot;org.apache.inlong.agent.plugin.sinks.TdBusSink&quot;,\n&quot;channel&quot;: &quot;org.apache.inlong.agent.plugin.channel.MemoryChannel&quot;\n},\n&quot;bus&quot;: {\n&quot;bid&quot;: &quot;thirtybid10&quot;,\n&quot;tdmanager&quot;: {\n&quot;port&quot;: &quot;8099&quot;,\n&quot;host&quot;: &quot;http://tl-tdbank-tdmanger.tencent-distribute.com&quot;\n}\n},\n&quot;op&quot;: &quot;add&quot;\n}'\n\n其中参数分别为：\nop:\n</code></pre>\n<p>##三、运行\n解压后如下命令运行</p>\n<pre><code>sh agent.sh start\n</code></pre>\n",
  "link": "/zh-cn/docs/modules/agent/quick_start.html",
  "meta": {}
}