<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.14">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Apache Inlong Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Apache Inlong Blog Atom Feed">
<link rel="alternate" type="application/rss+xml" href="/news/rss.xml" title="Apache Inlong RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/news/atom.xml" title="Apache Inlong Atom Feed"><title data-react-helmet="true">Example | Apache Inlong</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://inlong.apache.org/docs/next/sdk/dataproxy-sdk/example"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Example | Apache Inlong"><meta data-react-helmet="true" name="description" content="Overview"><meta data-react-helmet="true" property="og:description" content="Overview"><link data-react-helmet="true" rel="shortcut icon" href="/img/logo.svg"><link data-react-helmet="true" rel="canonical" href="https://inlong.apache.org/docs/next/sdk/dataproxy-sdk/example"><link data-react-helmet="true" rel="alternate" href="https://inlong.apache.org/docs/next/sdk/dataproxy-sdk/example" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://inlong.apache.org/zh-CN/docs/next/sdk/dataproxy-sdk/example" hreflang="zh-CN"><link data-react-helmet="true" rel="alternate" href="https://inlong.apache.org/docs/next/sdk/dataproxy-sdk/example" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.235f9eab.css">
<link rel="preload" href="/assets/js/runtime~main.3b22913f.js" as="script">
<link rel="preload" href="/assets/js/main.e5046002.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss")}catch(t){}return!1}())</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_OuoZ">Skip to main content</a></div><div class="announcementBar_axC9" style="background-color:#BBDFFF" role="banner"><div class="announcementBarPlaceholder_xYHE"></div><div class="announcementBarContent_6uhP">‚≠êÔ∏è &nbsp; If you like Apache InLong , give it a star on <a target="_blank" rel="noopener noreferrer" href="https://github.com/apache/incubator-inlong">GitHub</a></div><button type="button" class="clean-btn close announcementBarClose_A3A1" aria-label="Close"><svg viewBox="0 0 24 24" width="14" height="14" fill="currentColor"><path d="M24 20.188l-8.315-8.209 8.2-8.282-3.697-3.697-8.212 8.318-8.31-8.203-3.666 3.666 8.321 8.24-8.206 8.313 3.666 3.666 8.237-8.318 8.285 8.203z"></path></svg></button></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><img src="/img/logo.svg" alt="Apache" class="themedImage_TMUO themedImage--light_4Vu1 navbar__logo"><img src="/img/logo.svg" alt="Apache" class="themedImage_TMUO themedImage--dark_uzRr navbar__logo"><b class="navbar__title">Apache InLong</b></a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/">HOME</a><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a class="navbar__link" href="/docs/introduction">DOC</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/docs/next/introduction">Next</a></li><li><a class="dropdown__link" href="/docs/introduction">0.12.0</a></li><li><a class="dropdown__link" href="/docs/0.11.0/user_guide/quick_start">0.11.0</a></li><li><a class="dropdown__link" href="/versions/">All versions</a></li></ul></div><a class="navbar__item navbar__link" href="/download/main">DOWNLOAD</a><a class="navbar__item navbar__link" href="/development/how-to-contribute">DEVELOPMENT</a><a class="navbar__item navbar__link" href="/blog">BLOG</a><a class="navbar__item navbar__link" href="/news">NEWS</a><a class="navbar__item navbar__link" href="/users">USERS</a><a class="navbar__item navbar__link" href="/team">TEAM</a><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a class="navbar__link">ASF</a><ul class="dropdown__menu"><li><a href="https://www.apache.org/" target="_blank" rel="noopener noreferrer" class="dropdown__link">Apache Software Foundation</a></li><li><a href="https://incubator.apache.org/" target="_blank" rel="noopener noreferrer" class="dropdown__link">Apache Incubator</a></li><li><a href="https://www.apache.org/licenses/" target="_blank" rel="noopener noreferrer" class="dropdown__link">License</a></li><li><a href="https://www.apache.org/events/current-event" target="_blank" rel="noopener noreferrer" class="dropdown__link">Events</a></li><li><a href="https://www.apache.org/security/" target="_blank" rel="noopener noreferrer" class="dropdown__link">Security</a></li><li><a href="https://www.apache.org/foundation/sponsorship.html" target="_blank" rel="noopener noreferrer" class="dropdown__link">Sponsorship</a></li><li><a href="https://www.apache.org/foundation/thanks.html" target="_blank" rel="noopener noreferrer" class="dropdown__link">Thanks</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" class="navbar__link"><span><svg t="1631348384596" class="iconLanguage_EbrZ" viewBox="0 0 1024 1024" version="1.1" p-id="557" width="20" height="20"><path d="M547.797333 638.208l-104.405333-103.168 1.237333-1.28a720.170667 720.170667 0 0 0 152.490667-268.373333h120.448V183.082667h-287.744V100.906667H347.605333v82.218666H59.818667V265.386667h459.178666a648.234667 648.234667 0 0 1-130.304 219.946666 643.242667 643.242667 0 0 1-94.976-137.728H211.541333a722.048 722.048 0 0 0 122.453334 187.434667l-209.194667 206.378667 58.368 58.368 205.525333-205.525334 127.872 127.829334 31.232-83.84m231.424-208.426667h-82.218666l-184.96 493.312h82.218666l46.037334-123.306667h195.242666l46.464 123.306667h82.218667l-185.002667-493.312m-107.690666 287.744l66.56-178.005333 66.602666 178.005333z" fill="currentColor" p-id="558"></path></svg><span>English</span></span></a><ul class="dropdown__menu"><li><a href="/docs/next/sdk/dataproxy-sdk/example" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" style="text-transform:capitalize">English</a></li><li><a href="/zh-CN/docs/next/sdk/dataproxy-sdk/example" target="_self" rel="noopener noreferrer" class="dropdown__link" style="text-transform:capitalize">ÁÆÄ‰Ωì‰∏≠Êñá</a></li></ul></div><a href="https://github.com/apache/incubator-inlong" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="react-toggle toggle_2i4l react-toggle--disabled"><div class="react-toggle-track" role="button" tabindex="-1"><div class="react-toggle-track-check"><span class="toggle_iYfV">üåú</span></div><div class="react-toggle-track-x"><span class="toggle_iYfV">üåû</span></div><div class="react-toggle-thumb"></div></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_lDyR"><button class="clean-btn backToTopButton_i9tI" type="button"><svg viewBox="0 0 24 24" width="28"><path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z" fill="currentColor"></path></svg></button><aside class="docSidebarContainer_0YBq"><div class="sidebar_a3j0"><nav class="menu thin-scrollbar menu_cyFh menuWithAnnouncementBar_+O1J"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/docs/next/introduction">InLong Introduction</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Design and Concept</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Quick Start</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Deployment</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Components</a></li><li class="theme-doc-sidebar-item-category menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#">SDK</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#" tabindex="0">DataProxy-SDK</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/next/sdk/dataproxy-sdk/example">Example</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/sdk/dataproxy-sdk/overview">Overview</a></li></ul></li></ul></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">User Guide</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Development</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Administration</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/docs/next/contact">Contact Us</a></li></ul></nav></div></aside><main class="docMainContainer_r8cw"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_zHA2"><div class="theme-doc-version-banner alert alert--warning margin-bottom--md" role="alert"><div>This is unreleased documentation for <!-- -->Apache Inlong<!-- --> <b>Next</b> version.</div><div class="margin-top--md">For up-to-date documentation, see the <b><a href="/docs/introduction">latest version</a></b> (<!-- -->0.12.0<!-- -->).</div></div><div class="docItemContainer_oiyr"><article><span class="theme-doc-version-badge badge badge--secondary">Version: <!-- -->Next</span><div class="tocCollapsible_aw-L theme-doc-toc-mobile tocMobile_Tx6Y"><button type="button" class="clean-btn tocCollapsibleButton_zr6a">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Example</h1></header><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_y2LR" id="overview"></a>Overview<a class="hash-link" href="#overview" title="Direct link to heading">#</a></h2><p>Inlong-dataproxy-sdk provides access api for TCP and HTTP protocols. When using TCP or HTTP access, you need to ensure that the dataproxy server has the access configuration of the corresponding protocol (ie the TCP or HTTP source service). If the user needs to use the UDP protocol to access, the user needs to packets data according to the bytes arrays transmitted by TCP, and send them to the dataproxy server using the UDP protocol.
and dataproxy server will handle messages in the same way as TCP.
In addition, access demo codes for TCP, HTTP, and UDP protocols are provided in the example directory of inlong dataproxy SDK, which you can refer to when accessing.</p><p>To view detailed API information <a href="/docs/next/sdk/dataproxy-sdk/overview">overview</a>.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_y2LR" id="add-dependency"></a>Add Dependency<a class="hash-link" href="#add-dependency" title="Direct link to heading">#</a></h2><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#F8F8F2"><span class="token plain">   &lt;dependency&gt;</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">           &lt;groupId&gt;org.apache.inlong&lt;/groupId&gt;</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">           &lt;artifactId&gt;inlong-dataproxy-sdk&lt;/artifactId&gt;</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">           &lt;version&gt;${inlong_version}&lt;/version&gt;</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">   &lt;/dependency&gt;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_y2LR" id="tcp-example"></a>TCP Example<a class="hash-link" href="#tcp-example" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_y2LR" id="create-a-messagesender"></a>Create a messageSender<a class="hash-link" href="#create-a-messagesender" title="Direct link to heading">#</a></h3><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI java"><pre tabindex="0" class="prism-code language-java codeBlock_rtdJ thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#F8F8F2"><span class="token plain">    public DefaultMessageSender getMessageSender(String localIP, String inLongManagerAddr, String inLongManagerPort,</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            String netTag, String dataProxyGroup, boolean isLocalVisit, boolean isReadProxyIPFromLocal,</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            String configBasePath, int msgType) {</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        ProxyClientConfig dataProxyConfig = null;</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        DefaultMessageSender messageSender = null;</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        try {</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            dataProxyConfig = new ProxyClientConfig(localIP, isLocalVisit, inLongManagerAddr,</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                    Integer.valueOf(inLongManagerPort), dataProxyGroup, netTag);</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            if (StringUtils.isNotEmpty(configBasePath)) {</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                dataProxyConfig.setConfStoreBasePath(configBasePath);</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            }</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            dataProxyConfig.setReadProxyIPFromLocal(isReadProxyIPFromLocal);</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            messageSender = DefaultMessageSender.generateSenderByClusterId(dataProxyConfig);</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            messageSender.setMsgtype(msgType);</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        } catch (Exception e) {</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            logger.error(&quot;getMessageSender has exception e = {}&quot;, e);</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        }</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        return messageSender;</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>The parameter description is as follows:</p><table><thead><tr><th>parameter name</th><th>type</th><th>instruction</th></tr></thead><tbody><tr><td>inLongManagerAddr</td><td>String</td><td>inlong admin server address</td></tr><tr><td>inLongManagerPort</td><td>String</td><td>inlong admin server port</td></tr><tr><td>netTag</td><td>String</td><td>Network label, not used yet, you can pass an empty string</td></tr><tr><td>dataProxyGroup</td><td>String</td><td>dataProup group name, the name used for local configuration when the user enables local configuration</td></tr><tr><td>isLocalVisit</td><td>boolean</td><td>Whether to use local configuration, true use https to access the console, false use http to request the console</td></tr><tr><td>isReadProxyIPFromLocal</td><td>boolean</td><td>Whether to obtain the address information of the Dataproxy server from the local configuration file, local self-test, can be set to true if the management console cannot be accessede</td></tr><tr><td>configBasePath</td><td>String</td><td>The path of the local configuration file. The default is ./inlong. When isReadProxyIPFromLocal is true, the configuration file is searched from this directory</td></tr><tr><td>msgtype</td><td>int</td><td>Message assembly type, value (3, 5, 7, 8), it is recommended to use 7, each message type represents a message assembly protocol during the transmission process, please refer to the code implementation of SDK for details</td></tr></tbody></table><p>When isReadProxyIPFromLocal is true, the configuration information of Dataproxy will be obtained from the local configuration file.</p><p>The path to the local file is :</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#F8F8F2"><span class="token plain">    ${configBasePath}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>The file name is :</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#F8F8F2"><span class="token plain">    ${dataProxyGroup}.local</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>For example:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#F8F8F2"><span class="token plain">    configBasePath = /data/inlong</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    dataProxyGroup = inlong_test</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>Then the full path of the local file is:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#F8F8F2"><span class="token plain">    /data/inlong/inlong_test.local</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>The file configuration content is (json format), where host is the address of the DataProxy server, and port is the corresponding port, which requires at least two configurations (the same two items can be configured):</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI json"><pre tabindex="0" class="prism-code language-json codeBlock_rtdJ thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token property">&quot;isInterVisit&quot;</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token property">&quot;cluster_id&quot;</span><span class="token operator">:</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;1&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token property">&quot;size&quot;</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token property">&quot;switch&quot;</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token property">&quot;address&quot;</span><span class="token operator">:</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token property">&quot;host&quot;</span><span class="token operator">:</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;127.0.0.1&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token property">&quot;port&quot;</span><span class="token operator">:</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;46802&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token property">&quot;host&quot;</span><span class="token operator">:</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;127.0.0.1&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token property">&quot;port&quot;</span><span class="token operator">:</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;46802&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_y2LR" id="send-message"></a>Send Message<a class="hash-link" href="#send-message" title="Direct link to heading">#</a></h3><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI java"><pre tabindex="0" class="prism-code language-java codeBlock_rtdJ thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#F8F8F2"><span class="token plain">    public void sendTcpMessage(DefaultMessageSender sender, String inlongGroupId,</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            String inlongStreamId, String messageBody, long dt) throws Exception {</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      SendResult result = sender.sendMessage(messageBody.getBytes(&quot;utf8&quot;),inlongGroupId, inlongStreamId,</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">             0, String.valueOf(dt), 20,TimeUnit.SECONDS);</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      logger.info(&quot;messageSender {} &quot;, result);</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>The parameter description is as follows:</p><table><thead><tr><th>parameter name</th><th>type</th><th>instruction</th></tr></thead><tbody><tr><td>sender</td><td>HttpProxySender</td><td>The sender created in the first step</td></tr><tr><td>inlongGroupId</td><td>String</td><td>inglongGroupId</td></tr><tr><td>inlongStreamId</td><td>String</td><td>inlongStreamId</td></tr><tr><td>messageBody</td><td>String</td><td>Sent message content</td></tr><tr><td>dt</td><td>long</td><td>timestamp</td></tr></tbody></table><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_y2LR" id="http-example"></a>HTTP Example<a class="hash-link" href="#http-example" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_y2LR" id="create-messagesender"></a>Create MessageSender<a class="hash-link" href="#create-messagesender" title="Direct link to heading">#</a></h3><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI java"><pre tabindex="0" class="prism-code language-java codeBlock_rtdJ thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#F8F8F2"><span class="token plain">    public HttpProxySender getMessageSender(String localIP, String inLongManagerAddr, String inLongManagerPort,</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            String netTag, String dataProxyGroup, boolean isLocalVisit, boolean isReadProxyIPFromLocal,</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            String configBasePath) {</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">         ProxyClientConfig proxyConfig = null;</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">         HttpProxySender sender = null;</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">         try {</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              proxyConfig = new ProxyClientConfig(localIP, isLocalVisit, inLongManagerAddr,</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                        Integer.valueOf(inLongManagerPort),</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                        dataProxyGroup, netTag);</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">             proxyConfig.setGroupId(dataProxyGroup);</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">             proxyConfig.setConfStoreBasePath(configBasePath);</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">             proxyConfig.setReadProxyIPFromLocal(isReadProxyIPFromLocal);</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">             proxyConfig.setDiscardOldMessage(true);</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">             sender = new HttpProxySender(proxyConfig);</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">         } catch (ProxysdkException e) {</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">             e.printStackTrace();</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">         } catch (Exception e) {</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">             e.printStackTrace();</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">         }</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        return sender;</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>The parameter description is as follows:</p><table><thead><tr><th>parameter name</th><th>type</th><th>instruction</th></tr></thead><tbody><tr><td>inLongManagerAddr</td><td>String</td><td>inlong admin server address</td></tr><tr><td>inLongManagerPort</td><td>String</td><td>inlong admin server port</td></tr><tr><td>netTag</td><td>String</td><td>Network label, not used yet, you can pass an empty string</td></tr><tr><td>dataProxyGroup</td><td>String</td><td>dataProup group name, the name used for local configuration when the user enables local configuration</td></tr><tr><td>isLocalVisit</td><td>boolean</td><td>Whether to use local configuration, true use https to access the console, false use http to request the console</td></tr><tr><td>isReadProxyIPFromLocal</td><td>boolean</td><td>Whether to obtain the address information of the Dataproxy server from the local configuration file, local self-test, can be set to true if the management console cannot be accessed</td></tr><tr><td>configBasePath</td><td>String</td><td>The path of the local configuration file. The default is ./inlong. When isReadProxyIPFromLocal is true, the configuration file is searched from this directory.</td></tr></tbody></table><p>When isReadProxyIPFromLocal is set true, the configuration information of Dataproxy will be obtained from the local configuration file.</p><p>The path to the local file is:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#F8F8F2"><span class="token plain">    ${configBasePath}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>The file name is:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#F8F8F2"><span class="token plain">    ${dataProxyGroup}.local&lt;br/&gt;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>For example:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#F8F8F2"><span class="token plain">    configBasePath = /data/inlong</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    dataProxyGroup = inlong_test</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>Then the full path name of the local file is:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#F8F8F2"><span class="token plain">    /data/inlong/inlong_test.local</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>The file configuration content is (json format), where host is the address of the DataProxy server, and port is the corresponding port, which requires at least two configurations (the same two items can be configured):</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI json"><pre tabindex="0" class="prism-code language-json codeBlock_rtdJ thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token property">&quot;isInterVisit&quot;</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token property">&quot;cluster_id&quot;</span><span class="token operator">:</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;1&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token property">&quot;size&quot;</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token property">&quot;switch&quot;</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token property">&quot;address&quot;</span><span class="token operator">:</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token property">&quot;host&quot;</span><span class="token operator">:</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;127.0.0.1&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token property">&quot;port&quot;</span><span class="token operator">:</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;46802&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token property">&quot;host&quot;</span><span class="token operator">:</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;127.0.0.1&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token property">&quot;port&quot;</span><span class="token operator">:</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;46802&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_y2LR" id="send-message-1"></a>Send Message<a class="hash-link" href="#send-message-1" title="Direct link to heading">#</a></h3><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI java"><pre tabindex="0" class="prism-code language-java codeBlock_rtdJ thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#F8F8F2"><span class="token plain">    public void sendHttpMessage(HttpProxySender sender, String inlongGroupId,</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            String inlongStreamId, String messageBody) throws Exception {</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        List&lt;String&gt; bodyList = new ArrayList&lt;&gt;();</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        bodyList.add(messageBody);</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        sender.asyncSendMessage(bodyList, inlongGroupId, inlongStreamId, System.currentTimeMillis(),</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">             20, TimeUnit.SECONDS, new MyMessageCallBack());</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>The parameter description is as follows:</p><table><thead><tr><th>parameter name</th><th>type</th><th>instruction</th></tr></thead><tbody><tr><td>sender</td><td>HttpProxySender</td><td>The sender created in the first step</td></tr><tr><td>inlongGroupId</td><td>String</td><td>inglongGroupId</td></tr><tr><td>inlongStreamId</td><td>String</td><td>inlongStreamId</td></tr><tr><td>messageBody</td><td>String</td><td>Sent message content</td></tr></tbody></table><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_y2LR" id="udp-example"></a>UDP Example<a class="hash-link" href="#udp-example" title="Direct link to heading">#</a></h2><p>inlong-dataproxy-sdk does not support sending messages of UDP protocol. If users need it, they need to assemble them according to the message assembly method in SDK.
Organize binary arrays and send them in upd mode. For specific examples, refer to the relevant example codes in inlong-sdk/dataporxy-sdk.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/apache/incubator-inlong-website/edit/master/docs/sdk/dataproxy-sdk/example.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_mS5F" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_mt2f"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/next/modules/audit/quick_start"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">¬´ <!-- -->Deployment</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/next/sdk/dataproxy-sdk/overview"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Overview<!-- --> ¬ª</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_vrFS thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#overview" class="table-of-contents__link">Overview</a></li><li><a href="#add-dependency" class="table-of-contents__link">Add Dependency</a></li><li><a href="#tcp-example" class="table-of-contents__link">TCP Example</a><ul><li><a href="#create-a-messagesender" class="table-of-contents__link">Create a messageSender</a></li><li><a href="#send-message" class="table-of-contents__link">Send Message</a></li></ul></li><li><a href="#http-example" class="table-of-contents__link">HTTP Example</a><ul><li><a href="#create-messagesender" class="table-of-contents__link">Create MessageSender</a></li><li><a href="#send-message-1" class="table-of-contents__link">Send Message</a></li></ul></li><li><a href="#udp-example" class="table-of-contents__link">UDP Example</a></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container"><div class="footer__bottom text--center"><div class="margin-bottom--sm"><a href="https://inlong.apache.org" target="_blank" rel="noopener noreferrer" class="footerLogoLink_SRtH"><img src="/img/incubator-logo.svg" alt="Apache Inlong" class="themedImage_TMUO themedImage--light_4Vu1 footer__logo"><img src="/img/incubator-logo.svg" alt="Apache Inlong" class="themedImage_TMUO themedImage--dark_uzRr footer__logo"></a></div><div class="footer__copyright"><div style="text-align: left;">
          <div>
            <p style="font-family: Avenir-Medium;font-size: 14px;color: #999;line-height: 20px;"> Apache InLong is an effort undergoing incubation at The Apache Software Foundation (ASF), sponsored by the name of Apache TLP sponsor. Incubation is required of all newly accepted projects until a further review indicates that the infrastructure, communications, and decision making process have stabilized in a manner consistent with other successful ASF projects. While incubation status is not necessarily a reflection of the completeness or stability of the code, it does indicate that the project has yet to be fully endorsed by the ASF. </p>
          </div>
          <div style="border-top: 1px solid #ccc;min-height: 60px;line-height: 20px;text-align: center;font-family: Avenir-Medium;font-size: 14px;color: #999;display: flex;align-items: center;"><span>Copyright ¬© 2019-2022 The Apache Software Foundation. Apache InLong, InLong, and its feather logo are trademarks of The Apache Software Foundation.</span></div>
        </div></div></div></div></footer></div>
<script src="/assets/js/runtime~main.3b22913f.js"></script>
<script src="/assets/js/main.e5046002.js"></script>
</body>
</html>