<!doctype html>
<html class="docs-version-0.11.0" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.9">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Apache Inlong Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Apache Inlong Blog Atom Feed"><title data-react-helmet="true">Quick Start | Apache Inlong</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://inlong.apache.org/docs/modules/tubemq/quick_start"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="0.11.0"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-0.11.0"><meta data-react-helmet="true" property="og:title" content="Quick Start | Apache Inlong"><meta data-react-helmet="true" name="description" content="1 Deploy and Start"><meta data-react-helmet="true" property="og:description" content="1 Deploy and Start"><link data-react-helmet="true" rel="shortcut icon" href="/img/logo.svg"><link data-react-helmet="true" rel="canonical" href="https://inlong.apache.org/docs/modules/tubemq/quick_start"><link data-react-helmet="true" rel="alternate" href="https://inlong.apache.org/docs/modules/tubemq/quick_start" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://inlong.apache.org/zh-CN/docs/modules/tubemq/quick_start" hreflang="zh-CN"><link data-react-helmet="true" rel="alternate" href="https://inlong.apache.org/docs/modules/tubemq/quick_start" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.4ba64480.css">
<link rel="preload" href="/assets/js/runtime~main.47b1ba6a.js" as="script">
<link rel="preload" href="/assets/js/main.3ffb8b1c.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_OuoZ">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><img src="/img/logo.svg" alt="Apache" class="themedImage_TMUO themedImage--light_4Vu1 navbar__logo"><img src="/img/logo.svg" alt="Apache" class="themedImage_TMUO themedImage--dark_uzRr navbar__logo"><b class="navbar__title">Apache InLong</b></a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/">HOME</a><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a class="navbar__link" href="/docs/user_guide/quick_start">DOC</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/docs/next/user_guide/quick_start">Next</a></li><li><a class="dropdown__link" href="/docs/user_guide/quick_start">0.11.0</a></li><li><a class="dropdown__link" href="/versions/">All versions</a></li></ul></div><a class="navbar__item navbar__link" href="/download/main">DOWNLOAD</a><a class="navbar__item navbar__link" href="/development/how-to-contribute">DEVELOPMENT</a><a class="navbar__item navbar__link" href="/blog">BLOG</a><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a class="navbar__link">ASF</a><ul class="dropdown__menu"><li><a href="https://www.apache.org/" target="_blank" rel="noopener noreferrer" class="dropdown__link">Foundation</a></li><li><a href="https://www.apache.org/licenses/" target="_blank" rel="noopener noreferrer" class="dropdown__link">License</a></li><li><a href="https://www.apache.org/events/" target="_blank" rel="noopener noreferrer" class="dropdown__link">Events</a></li><li><a href="https://www.apache.org/security/" target="_blank" rel="noopener noreferrer" class="dropdown__link">Security</a></li><li><a href="https://www.apache.org/foundation/sponsorship.html" target="_blank" rel="noopener noreferrer" class="dropdown__link">Sponsorship</a></li><li><a href="https://www.apache.org/foundation/thanks.html" target="_blank" rel="noopener noreferrer" class="dropdown__link">Thanks</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" class="navbar__link"><span><svg t="1631348384596" class="iconLanguage_EbrZ" viewBox="0 0 1024 1024" version="1.1" p-id="557" width="20" height="20"><path d="M547.797333 638.208l-104.405333-103.168 1.237333-1.28a720.170667 720.170667 0 0 0 152.490667-268.373333h120.448V183.082667h-287.744V100.906667H347.605333v82.218666H59.818667V265.386667h459.178666a648.234667 648.234667 0 0 1-130.304 219.946666 643.242667 643.242667 0 0 1-94.976-137.728H211.541333a722.048 722.048 0 0 0 122.453334 187.434667l-209.194667 206.378667 58.368 58.368 205.525333-205.525334 127.872 127.829334 31.232-83.84m231.424-208.426667h-82.218666l-184.96 493.312h82.218666l46.037334-123.306667h195.242666l46.464 123.306667h82.218667l-185.002667-493.312m-107.690666 287.744l66.56-178.005333 66.602666 178.005333z" fill="currentColor" p-id="558"></path></svg><span>English</span></span></a><ul class="dropdown__menu"><li><a href="/docs/modules/tubemq/quick_start" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" style="text-transform:capitalize">English</a></li><li><a href="/zh-CN/docs/modules/tubemq/quick_start" target="_self" rel="noopener noreferrer" class="dropdown__link" style="text-transform:capitalize">ç®€ä½“ä¸­æ–‡</a></li></ul></div><a href="https://github.com/apache/incubator-inlong" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="react-toggle toggle_2i4l react-toggle--disabled"><div class="react-toggle-track" role="button" tabindex="-1"><div class="react-toggle-track-check"><span class="toggle_iYfV">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_iYfV">ðŸŒž</span></div><div class="react-toggle-thumb"></div></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_lDyR"><button class="clean-btn backToTopButton_i9tI" type="button"><svg viewBox="0 0 24 24" width="28"><path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z" fill="currentColor"></path></svg></button><aside class="docSidebarContainer_0YBq"><div class="sidebar_a3j0"><nav class="menu thin-scrollbar menu_cyFh menuWithAnnouncementBar_+O1J"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category menu__list-item"><a class="menu__link menuLinkText_OKON">User Guide</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/docs/user_guide/quick_start">Quick Start</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/docs/user_guide/user_manual">User Manual</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/docs/user_guide/example">Hive Example</a></li></ul></li><li class="theme-doc-sidebar-item-category menu__list-item"><a class="menu__link menuLinkText_OKON">Components</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category menu__list-item"><a class="menu__link menuLinkText_OKON" tabindex="0">Manager</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/docs/modules/manager/architecture">Architecture</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/docs/modules/manager/quick_start">Build &amp;&amp; Deployment</a></li></ul></li><li class="theme-doc-sidebar-item-category menu__list-item"><a class="menu__link menuLinkText_OKON" tabindex="0">Website</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/docs/modules/website/quick_start">Build &amp;&amp; Deployment</a></li></ul></li><li class="theme-doc-sidebar-item-category menu__list-item"><a class="menu__link menuLinkText_OKON" tabindex="0">Agent</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/docs/modules/agent/architecture">Architecture</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/docs/modules/agent/quick_start">Build &amp;&amp; Deployment</a></li></ul></li><li class="theme-doc-sidebar-item-category menu__list-item"><a class="menu__link menuLinkText_OKON" tabindex="0">DataProxy</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/docs/modules/dataproxy/architecture">Architecture</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/docs/modules/dataproxy/quick_start">Build &amp;&amp; Deployment</a></li></ul></li><li class="theme-doc-sidebar-item-category menu__list-item"><a class="menu__link menuLinkText_OKON" tabindex="0">DataProxy-SDK</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/docs/modules/dataproxy-sdk/architecture">Architecture</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/docs/modules/dataproxy-sdk/quick_start">Build &amp;&amp; Deployment</a></li></ul></li><li class="theme-doc-sidebar-item-category menu__list-item"><a class="menu__link menuLinkText_OKON" tabindex="0">TubeMQ</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/docs/modules/tubemq/architecture">Architecture</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/docs/modules/tubemq/client_rpc">Client RPC</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/docs/modules/tubemq/clients_java">TubeMQ JAVA SDK API</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/docs/modules/tubemq/configure_introduction">Configure Introduction</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/docs/modules/tubemq/console_introduction">Console Introduction</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/docs/modules/tubemq/consumer_example">Consumer Example</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/docs/modules/tubemq/deployment">Deployment</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/docs/modules/tubemq/error_code">Error Code</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/docs/modules/tubemq/http_access_api">HTTP API</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/docs/modules/tubemq/producer_example">Producer Example</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/modules/tubemq/quick_start">Quick Start</a></li><li class="theme-doc-sidebar-item-category menu__list-item"><a class="menu__link menuLinkText_OKON" tabindex="0">tubemq-manager</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/docs/modules/tubemq/tubemq-manager/quick_start">quick_start</a></li></ul></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/docs/modules/tubemq/tubemq_perf_test_vs_Kafka_cn">Performance testing of TubeMQ vs Kafka</a></li></ul></li><li class="theme-doc-sidebar-item-category menu__list-item"><a class="menu__link menuLinkText_OKON" tabindex="0">Sort</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/docs/modules/sort/introduction">Architecture</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/docs/modules/sort/protocol_introduction">Zookeeper Configure</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/docs/modules/sort/quick_start">Build &amp;&amp; Deployment</a></li></ul></li></ul></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/docs/contact">Contact Us</a></li></ul></nav></div></aside><main class="docMainContainer_r8cw"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_zHA2"><div class="docItemContainer_oiyr"><article><span class="theme-doc-version-badge badge badge--secondary">Version: <!-- -->0.11.0</span><div class="tocCollapsible_aw-L theme-doc-toc-mobile tocMobile_Tx6Y"><button type="button" class="clean-btn tocCollapsibleButton_zr6a">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Quick Start</h1></header><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_y2LR" id="1-deploy-and-start"></a>1 Deploy and Start<a class="hash-link" href="#1-deploy-and-start" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_y2LR" id="11-configuration-example"></a>1.1 Configuration Example<a class="hash-link" href="#11-configuration-example" title="Direct link to heading">#</a></h3><p>There&#x27;re two components in the cluster: <strong>Master</strong> and <strong>Broker</strong>. Master and Broker
can be deployed on the same server or different servers. In this example, we setup our cluster
like this, and all services run on the same node. Zookeeper should be setup in your environment also.
| Role | TCP Port | TLS Port | Web Port | Comment |
| ---- | -------- | -------- | -------- | ------- |
| Master | 8099 | 8199 | 8080 | Meta data is stored at /stage/meta_data |
| Broker | 8123 | 8124 | 8081 | Message is stored at /stage/msg_data |
| Zookeeper | 2181 | | | Offset is stored at /tubemq |</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_y2LR" id="12-prerequisites"></a>1.2 Prerequisites<a class="hash-link" href="#12-prerequisites" title="Direct link to heading">#</a></h3><ul><li>ZooKeeper Cluster</li></ul><p>After you extract the package file, here&#x27;s the folder structure.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#F8F8F2"><span class="token plain">/INSTALL_PATH/inlong-tubemq-server/</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">â”œâ”€â”€ bin</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">â”œâ”€â”€ conf</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">â”œâ”€â”€ lib</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">â”œâ”€â”€ logs</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">â””â”€â”€ resources</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_y2LR" id="13-configure-master"></a>1.3 Configure Master<a class="hash-link" href="#13-configure-master" title="Direct link to heading">#</a></h3><p>You can change configurations in <code>conf/master.ini</code> according to cluster information.</p><ul><li>Master IP and Port</li></ul><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI ini"><pre tabindex="0" class="prism-code language-ini codeBlock_rtdJ thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#F8F8F2"><span class="token plain">[master]</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">hostName=YOUR_SERVER_IP                  // replaced with your server IP</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">port=8099</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">webPort=8080</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">metaDataPath=/stage/meta_data</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><ul><li>Access Authorization Token</li></ul><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI ini"><pre tabindex="0" class="prism-code language-ini codeBlock_rtdJ thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#F8F8F2"><span class="token plain">confModAuthToken=abc                    // for configuring Web Resources\API etc</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><ul><li>ZooKeeper Cluster</li></ul><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI ini"><pre tabindex="0" class="prism-code language-ini codeBlock_rtdJ thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#F8F8F2"><span class="token plain">[zookeeper]                             // Master and Broker in the same cluster must use the same zookeeper environment and have the same configuration</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">zkNodeRoot=/tubemq</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">zkServerAddr=localhost:2181             // multi zookeeper addresses can separate with &quot;,&quot;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><ul><li>Replication Strategy </li></ul><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI ini"><pre tabindex="0" class="prism-code language-ini codeBlock_rtdJ thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#F8F8F2"><span class="token plain">[replication]</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">repGroupName=tubemqGroup1                // The Master of the same cluster must use the same group name, and the group names of different clusters must be different</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">repNodeName=tubemqGroupNode1             // The master node names of the same cluster must be different names</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">repHelperHost=FIRST_MASTER_NODE_IP:9001  // helperHost is used for building HA master.</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><ul><li>(Optional) Master High Availability
In the example above, we run the services on a single node. However, in real production environment, you
need to run multiple master services on different servers for high availability purpose. Here&#x27;s
the introduction of availability level.</li></ul><table><thead><tr><th>HA Level</th><th>Master Number</th><th>Description</th></tr></thead><tbody><tr><td>High</td><td>3 masters</td><td>After any master crashed, the cluster meta data is still in read/write state and can accept new producers/consumers.</td></tr><tr><td>Medium</td><td>2 masters</td><td>After one master crashed, the cluster meta data is in read only state. There&#x27;s no affect on existing producers and consumers.</td></tr><tr><td>Minimum</td><td>1 master</td><td>After the master crashed, there&#x27;s no affect on existing producer and consumer.</td></tr></tbody></table><p><strong>Tips</strong>ï¼šPlease notice that the master servers should be clock synchronized.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_y2LR" id="14-configure-broker"></a>1.4 Configure Broker<a class="hash-link" href="#14-configure-broker" title="Direct link to heading">#</a></h3><p>You can change configurations in <code>conf/broker.ini</code> according to cluster information.</p><ul><li>Broker IP and Port</li></ul><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI ini"><pre tabindex="0" class="prism-code language-ini codeBlock_rtdJ thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#F8F8F2"><span class="token plain">[broker]</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">brokerId=0</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">hostName=YOUR_SERVER_IP                 // replaced with your server IP</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">port=8123</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">webPort=8081</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><ul><li>Master Address</li></ul><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI ini"><pre tabindex="0" class="prism-code language-ini codeBlock_rtdJ thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#F8F8F2"><span class="token plain">masterAddressList=MASTER_NODE_IP1:8099,MASTER_NODE_IP2:8099   // multi addresses can separate with &quot;,&quot;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><ul><li>Metadata Path</li></ul><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI ini"><pre tabindex="0" class="prism-code language-ini codeBlock_rtdJ thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#F8F8F2"><span class="token plain">primaryPath=/stage/msg_data</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><ul><li>ZooKeeper Cluster</li></ul><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI ini"><pre tabindex="0" class="prism-code language-ini codeBlock_rtdJ thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#F8F8F2"><span class="token plain">[zookeeper]                             // Master and Broker in the same cluster must use the same zookeeper environment and have the same configuration</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">zkNodeRoot=/tubemq</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">zkServerAddr=localhost:2181             // multi zookeeper addresses can separate with &quot;,&quot;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_y2LR" id="15-start-master"></a>1.5 Start Master<a class="hash-link" href="#15-start-master" title="Direct link to heading">#</a></h3><p>Please go to the <code>bin</code> folder and run this command to start
the master service.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#F8F8F2"><span class="token plain">./tubemq.sh master start</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>You should be able to access <code>http://your-master-ip:8080</code> to see the
web GUI now.</p><p><img alt="TubeMQ Console GUI" src="/assets/images/tubemq-console-gui-123e6fb030a5e6ebadf15962dcd5d284.png"></p><h4><a aria-hidden="true" tabindex="-1" class="anchor anchor__h4 anchorWithStickyNavbar_y2LR" id="151-configure-broker-metadata"></a>1.5.1 Configure Broker Metadata<a class="hash-link" href="#151-configure-broker-metadata" title="Direct link to heading">#</a></h4><p>Before we start a broker service, we need to configure it on master web GUI first. Go to the <code>Broker List</code> page, click <code>Add Single Broker</code>, and input the new broker information.</p><p><img alt="Add Broker 1" src="/assets/images/tubemq-add-broker-1-50044a59203725d7f55554cb551bed58.png"></p><p>In this example, we only need to input broker IP and authToken:</p><ol><li>broker IP: broker server ip</li><li>authToken: A token pre-configured in the <code>conf/master.ini</code> file. Please check the
<code>confModAuthToken</code> field in your <code>master.ini</code> file.</li></ol><p>Click the online link to activate the new added broker.</p><p><img alt="Add Broker 2" src="/assets/images/tubemq-add-broker-2-ab5859b782891dbcb816f00c8ad87a58.png"></p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_y2LR" id="16-start-broker"></a>1.6 Start Broker<a class="hash-link" href="#16-start-broker" title="Direct link to heading">#</a></h3><p>Please go to the <code>bin</code> folder and run this command to start the broker service</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#F8F8F2"><span class="token plain">./tubemq.sh broker start</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>Refresh the GUI broker list page, you can see that the broker now is registered.</p><p>After the sub-state of the broker changed to <code>idle</code>, we can add topics to that broker.</p><p><img alt="Add Broker 3" src="/assets/images/tubemq-add-broker-3-e1425119a14c1590281eea32e4f58f5f.png"></p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_y2LR" id="2-quick-start"></a>2 Quick Start<a class="hash-link" href="#2-quick-start" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_y2LR" id="31-add-topic"></a>3.1 Add Topic<a class="hash-link" href="#31-add-topic" title="Direct link to heading">#</a></h3><p>We can add or manage the cluster topics on the web GUI. To add a new topic, go to the
topic list page and click the add new topic button</p><p><img alt="Add Topic 1" src="/assets/images/tubemq-add-topic-1-8ab9641b011376860472b509f5f54256.png"></p><p>Then select the brokers which you want to deploy the topics to.</p><p><img alt="Add Topic 5" src="/assets/images/tubemq-add-topic-5-f0f370c770f6855fee6592a079cac1d2.png"></p><p>We can see the publish and subscribe state of the new added topic is still grey. We need
to go to the broker list page to reload the broker configuration.</p><p><img alt="Add Topic 6" src="/assets/images/tubemq-add-topic-6-28364b9457706ac93f128184ee874fb7.png"></p><p><img alt="Add Topic 2" src="/assets/images/tubemq-add-topic-2-965c75eb7881ad45f0279810f58e1dc3.png"></p><p>When the broker sub-state changed to idle, go to the topic list page. We can see
that the topic publish/subscribe state is active now.</p><p><img alt="Add Topic 3" src="/assets/images/tubemq-add-topic-3-c6d1c32e626a60def177b8fcc9646015.png"></p><p><img alt="Add Topic 4" src="/assets/images/tubemq-add-topic-4-48ef9d8ba13c36a2f2b4208f062c1680.png"></p><p>Now we can use the topic to send messages.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_y2LR" id="22-run-example"></a>2.2 Run Example<a class="hash-link" href="#22-run-example" title="Direct link to heading">#</a></h3><p>Now we can use <code>demo</code> topic which created before to test our cluster.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor anchor__h4 anchorWithStickyNavbar_y2LR" id="221-produce-messages"></a>2.2.1 Produce Messages<a class="hash-link" href="#221-produce-messages" title="Direct link to heading">#</a></h4><p>Please don&#x27;t forget replace <code>YOUR_MASTER_IP:port</code> with your server ip and port, and start producer.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#F8F8F2"><span class="token builtin class-name" style="color:rgb(189, 147, 249)">cd</span><span class="token plain"> /INSTALL_PATH/apache-inlong-tubemq-server-</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">TUBEMQ-VERSION</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain">-bin</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">./bin/tubemq-producer-test.sh --master-servers YOUR_MASTER_IP1:port,YOUR_MASTER_IP2:port --topicName demo</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>From the log, we can see the message is sent out.
<img alt="Demo 1" src="/assets/images/tubemq-send-message-3ceedb761daf672ee43b0a9a67905d87.png"></p><h4><a aria-hidden="true" tabindex="-1" class="anchor anchor__h4 anchorWithStickyNavbar_y2LR" id="222-consume-messages"></a>2.2.2 Consume Messages<a class="hash-link" href="#222-consume-messages" title="Direct link to heading">#</a></h4><p>Please don&#x27;t forget replace YOUR_MASTER_IP:port with your server ip and port, and start consumer.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#F8F8F2"><span class="token builtin class-name" style="color:rgb(189, 147, 249)">cd</span><span class="token plain"> /INSTALL_PATH/apache-inlong-tubemq-server-</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">TUBEMQ-VERSION</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain">-bin</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">./bin/tubemq-consumer-test.sh --master-servers YOUR_MASTER_IP1:port,YOUR_MASTER_IP2:port --topicName demo --groupName test_consume</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>From the log, we can see the message received by the consumer.
<img alt="Demo 2" src="/assets/images/tubemq-consume-message-a27f49fde7c5f5bcc565ca6ed2537088.png"></p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_y2LR" id="3-the-end"></a>3 The End<a class="hash-link" href="#3-the-end" title="Direct link to heading">#</a></h2><p>Here, the compilation, deployment, system configuration, startup, production and consumption of TubeMQ have been completed. If you need to understand more in-depth content, please check the relevant content in &quot;TubeMQ HTTP API&quot; and make the corresponding configuration settings.</p><hr></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/apache/incubator-inlong-website/edit/master/versioned_docs/version-0.11.0/modules/tubemq/quick_start.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_mS5F" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_mt2f"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/modules/tubemq/producer_example"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« <!-- -->Producer Example</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/modules/tubemq/tubemq-manager/quick_start"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">quick_start<!-- --> Â»</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_vrFS thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#1-deploy-and-start" class="table-of-contents__link">1 Deploy and Start</a><ul><li><a href="#11-configuration-example" class="table-of-contents__link">1.1 Configuration Example</a></li><li><a href="#12-prerequisites" class="table-of-contents__link">1.2 Prerequisites</a></li><li><a href="#13-configure-master" class="table-of-contents__link">1.3 Configure Master</a></li><li><a href="#14-configure-broker" class="table-of-contents__link">1.4 Configure Broker</a></li><li><a href="#15-start-master" class="table-of-contents__link">1.5 Start Master</a></li><li><a href="#16-start-broker" class="table-of-contents__link">1.6 Start Broker</a></li></ul></li><li><a href="#2-quick-start" class="table-of-contents__link">2 Quick Start</a><ul><li><a href="#31-add-topic" class="table-of-contents__link">3.1 Add Topic</a></li><li><a href="#22-run-example" class="table-of-contents__link">2.2 Run Example</a></li></ul></li><li><a href="#3-the-end" class="table-of-contents__link">3 The End</a></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container"><div class="footer__bottom text--center"><div class="margin-bottom--sm"><a href="https://inlong.apache.org" target="_blank" rel="noopener noreferrer" class="footerLogoLink_SRtH"><img src="/img/incubator-logo.svg" alt="Apache Inlong" class="themedImage_TMUO themedImage--light_4Vu1 footer__logo"><img src="/img/incubator-logo.svg" alt="Apache Inlong" class="themedImage_TMUO themedImage--dark_uzRr footer__logo"></a></div><div class="footer__copyright"><div style="text-align: left;">
          <div>
            <p style="font-family: Avenir-Medium;font-size: 14px;color: #999;line-height: 20px;">Apache InLong (incubating) is an effort undergoing incubation at The Apache Software Foundation (ASF), sponsored by Incubator. Incubation is required of all newly accepted projects until a further review indicates that the infrastructure, communications, and decision making process have stabilized in a manner consistent with other successful ASF projects. While incubation status is not necessarily a reflection of the completeness or stability of the code, it does indicate that the project has yet to be fully endorsed by the ASF.</p>
          </div>
          <div style="border-top: 1px solid #ccc;min-height: 60px;line-height: 20px;text-align: center;font-family: Avenir-Medium;font-size: 14px;color: #999;display: flex;align-items: center;"><span>Copyright Â© 2019-2020 The Apache Software Foundation. Apache InLong, InLong, and its feather logo are trademarks of The Apache Software Foundation.</span></div>
        </div></div></div></div></footer></div>
<script src="/assets/js/runtime~main.47b1ba6a.js"></script>
<script src="/assets/js/main.3ffb8b1c.js"></script>
</body>
</html>